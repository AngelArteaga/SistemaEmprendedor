@model  Sistemaemprendedor.Models.CatalogoEvento
@{
    ViewBag.Title = "Evento";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Sistemaemprendedor.Models.ActionResponses ActionResponses = ViewBag.ActionResponses;
}

<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <ol class="tg-breadcrumb">
                <li><a href="@Url.Action("Index", "Home")">Inicio</a></li>
                <li><a href="@Url.Action("Eventos", "Catalogo")">Eventos</a></li>
                @if (Model != null)
                {
                <li class="tg-active">@Model.Nombre</li>
                }
            </ol>
        </div>
    </div>
</div>

<div class="tg-haslayout">
@if (Model != null)
{
    <div class="container">
        <div class="row">
            <div id="tg-twocolumns" class="tg-twocolumns">
                <div class="col-xs-12 col-sm-offset-2 col-md-8 col-lg-9">
                    <div id="tg-content" class="tg-content">
                        <div class="tg-sectionhead">
                            <div class="tg-sectiontitles">
                                <h2>@Model.Titulo</h2>
                            </div>
                            <div class="tg-description">
                                <p></p>
                            </div>
                        </div>
                        <div class="tg-eventdetail">
                            <div class="tg-detailtitle">
                                <div class="tg-leftarea">                                    
                                    <time class="tg-eventdatetime" datetime="@Model.Fecha"><i class="icon-clock"></i>@Model.FechaMostrar @@ @Model.HoraEvento Hrs.</time>
                                </div>
                            </div>
                            <div class="tg-themepost tg-event">
                                <figure class="tg-themepostimg">
                                    <a href="javascript:void(0);"><img src="@Model.Url" /></a>
                                    <span class="tg-themepostlabel">@Model.TipoEvento</span>
                                    <div id="tg-upcomingeventcounter" class="tg-upcomingeventcounter"></div>
                                </figure>
                                <ul class="tg-eventinfo">
                                    <li>
                                        <i class="icon-phone-handset"></i>
                                        <div class="tg-eventcontent">
                                            <span>@Model.Telefono</span>
                                            <a href="#">@Model.Correo</a>
                                        </div>
                                    </li>
                                    <li>
                                        <i class="icon-clock"></i>
                                        <div class="tg-eventcontent">
                                            <span>@Model.FechaMostrar</span>
                                            <span>@Model.HoraEvento Hrs.</span>
                                        </div>
                                    </li>
                                    <li>
                                        <i class="icon-map-marker"></i>
                                        <div class="tg-eventcontent">
                                            <address id="adressinmap">@Model.DireccionComp</address>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="tg-detailbox tg-eventdescription">
                                <div class="tg-boxtitle">
                                    <h3>Descripción del evento</h3>
                                </div>
                                <div class="tg-description">
                                    <p>@Model.DescripcionCompleta</p>
                                </div>
                            </div>                             
                            <div id="map" class="tg-Minisectionspace tg-locationmap">

                            </div> 
                            <div class="tg-tagsshare tg-Minisectionspace">
                                <div class="tg-tags">
                                    <span>Compartir:</span>
                                    <ul class="tg-socialicons">
                                        <li class="tg-facebook"><a href="javascript:void(0);"><i class="fa fa-facebook"></i></a></li>
                                        <li class="tg-twitter"><a href="javascript:void(0);"><i class="fa fa-twitter"></i></a></li>
                                    </ul>
                                </div>
                                <div class="tg-socialshare pull-right">
                                    <div class="tg-btnarea">
                                        <a class="tg-btn pull-right" href="@Url.Action("RegistroEvento", "Nuevo", new { id = Model.idEvento })">Registrarse</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <!--************************************
                    Sin Resultados
        *************************************-->
    <div class="container">
        <div class="tg-404error">
            <div class="tg-404errorcontet">
                <h1>404</h1>
                <div class="tg-404holder">
                    <h2>Lo sentimos!</h2>
                    <h3>No es posible accede a este evento</h3>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-10 col-md-push-1 col-lg-8 col-lg-push-2">
                <form class="tg-formtheme tg-form404search">
                    <fieldset>
                        <div class="form-group">
                            <input type="search" name="search" class="form-control" placeholder="Busqueda">
                            <button class="tg-btn" type="submit">Buscar</button>
                        </div>
                    </fieldset>
                </form>
                <div class="tg-btnarea">
                    <a class="tg-btn" href="@Url.Action("Evento", "Nuevo")">Agregar Evento</a>
                </div>
                <div class="tg-btnarea">
                    <a class="tg-btn" href="@Url.Action("Eventos", "Catalogo")">Otros Eventos</a>
                </div>
                <div class="tg-btngoback">
                    <span>ó</span><a href="@Url.Action("Index", "Home")">
                        Ir al inicio.
                    </a>
                </div>
            </div>
        </div>
    </div>
        <!--************************************
                404 Error End
        *************************************-->
}

</div>
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCR-KEWAVCn52mSdeVeTqZjtqbmVJyfSus&language=es"></script>
<script src="~/Content/Map/gmaps.js"></script>
@section Scripts
{
    <script type="text/javascript">
    // Counter.
        $(document).ready(function () {            
            $('.tg-upcomingeventcounter').countdown('@Model.Counter', function (event) {
            var $this = jQuery(this).html(event.strftime(''
                + '<div class="tg-eventcounter"><span>%-D</span><span>D</span></div>'
                + '<div class="tg-eventcounter"><span>%H</span><span>H</span></div>'
                + '<div class="tg-eventcounter"><span>%M</span><span>M</span></div>'
                + '<div class="tg-eventcounter"><span>%S</span><span>S</span></div>'
            ));
        });
        });
        //map
        var map = new GMaps({
            div: '#map',
            lat: -12.043333,
            lng: -77.028333,
            zoom: 18        
        });
        var address;
        var callback;
        var status;
        var results;
        //geolocade
        GMaps.geocode({
            address: $('#adressinmap').text(),
            callback: function (results, status) {
                if (status == 'OK') {
                    var latlng = results[0].geometry.location;
                    map.setCenter(latlng.lat(), latlng.lng());
                    map.addMarker({
                        lat: latlng.lat(),
                        lng: latlng.lng(),
                        infoWindow: {
                            content: '<p>@Model.DireccionComp</p>',                            
                        },
                        mouseover: function () {
                            (this.infoWindow).open(this.map, this);
                        },
                        mouseout: function () {
                            this.infoWindow.close();
                        }
                    });
                }
            }
        });
    </script>
}